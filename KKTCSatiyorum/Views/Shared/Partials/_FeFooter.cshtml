@using BusinessLayer.Features.Kategoriler.Services
@using EntityLayer.Entities
@using Microsoft.AspNetCore.Identity
@inject IKategoriService KategoriService
@inject SignInManager<UygulamaKullanicisi> SignInManager


<footer class="footer">
    <div class="container">
        <div class="row g-4">
            <div class="col-lg-4">
                <h5><i class="bi bi-shop me-2"></i>KKTCSatıyorum</h5>
                <p class="text-muted">KKTC'nin en güvenilir ilan platformu.</p>
            </div>
            <div class="col-6 col-lg-2">
                <h5>Kategoriler</h5>
                @{
                    var kategoriResult = await KategoriService.GetListAsync();
                    var categories = (kategoriResult.IsSuccess && kategoriResult.Data != null)
                        ? kategoriResult.Data.Where(c => c.UstKategoriId == null && c.AktifMi).Take(6).ToList()
                        : new List<BusinessLayer.Features.Kategoriler.DTOs.KategoriListItemDto>();
                }
                
                @if (categories.Any())
                {
                    @foreach (var cat in categories)
                    {
                        <a asp-controller="Listings" asp-action="Index" asp-route-KategoriId="@cat.Id">@cat.Ad</a>
                    }
                }
                else
                {
                    <span class="text-muted small">Kategori bulunamadı.</span>
                }
            </div>
            <div class="col-6 col-lg-2">
                <h5>Hesabım</h5>
                @if (SignInManager.IsSignedIn(User))
                {
                    <a asp-area="Member" asp-controller="MyListings" asp-action="Index">İlanlarım</a>
                    <form asp-area="" asp-controller="Account" asp-action="Logout" method="post" class="d-inline">
                         @Html.AntiForgeryToken()
                        <button type="submit" class="btn btn-link p-0 text-decoration-none text-muted" style="font-weight: 400; font-size: inherit;">Çıkış Yap</button>
                    </form>
                }
                else
                {
                    <a asp-controller="Account" asp-action="Login">Giriş Yap</a>
                    <a asp-controller="Account" asp-action="Register">Kayıt Ol</a>
                }
            </div>
            <div class="col-6 col-lg-2">
                <h5>Yardım</h5>
                <a asp-controller="Home" asp-action="HowItWorks">Nasıl Çalışır?</a>
                <a asp-controller="Home" asp-action="Faq">SSS</a>
                <a asp-controller="Home" asp-action="SafeShopping">Güvenli Alışveriş</a>
                <a asp-controller="Home" asp-action="Contact">İletişim</a>
            </div>
            <div class="col-6 col-lg-2">
                <h5>Kurumsal</h5>
                <a asp-controller="Home" asp-action="About">Hakkımızda</a>
                <a asp-controller="Home" asp-action="Terms">Kullanım Koşulları</a>
                <a asp-controller="Home" asp-action="Privacy">Gizlilik Politikası</a>
                <a asp-controller="Home" asp-action="Kvkk">KVKK</a>
            </div>
        </div>
        <div class="footer-bottom">
            <p class="mb-0">&copy; @DateTime.Now.Year KKTCSatıyorum. Tüm hakları saklıdır.</p>
        </div>
    </div>
</footer>


<div class="modal fade" id="demoNotAvailableModal" tabindex="-1" aria-labelledby="demoNotAvailableModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="demoNotAvailableModalLabel"><i class="bi bi-info-circle me-2"></i>Bilgi</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Kapat"></button>
            </div>
            <div class="modal-body">
                <p class="mb-0">Bu özellik demo sürümünde aktif değildir.</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Kapat</button>
            </div>
        </div>
    </div>
</div>
